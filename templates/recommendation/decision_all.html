{% extends 'base.html' %}

{% block title %}ì—¬í–‰ ì •ë³´{% endblock %}
{% load humanize %}

{% block content %}
<!-- Header -->
<div class="header text-center py-3 position-relative" style="background-color: #f0f0f0;">
    <!-- ì´ì „ í˜ì´ì§€ ë²„íŠ¼ì„ ì™¼ìª½ì— ê³ ì • -->
    <a href="/" class="btn btn-secondary position-absolute"
       style="left: 3%; top: 50%; transform: translateY(-50%);">ë©”ì¸ í˜ì´ì§€</a>
    <!-- ì¤‘ì•™ ì •ë ¬ëœ ì œëª©ê³¼ ì„¤ëª… -->
    <div class="d-flex flex-column align-items-center justify-content-center">
        <a href="/" class="text-decoration-none">
            <h1 class="fw-bold text-primary">Life Is Travel</h1>
        </a>
        <p class="text-center text-muted">
            ì—¬í–‰ì€ ê°€ê³  ì‹¶ì€ë°, ì–´ë–»ê²Œ í•  ì§€ ëª¨ë¥´ê² ì–´. ë„ì™€ì¤˜!
        </p>
    </div>
</div>

<!-- ê²€ìƒ‰ ì¡°ê±´ ìš”ì•½ ì˜ì—­ -->
<div class="container my-4">
    <h2 class="mb-4">ì—¬í–‰ ì •ë³´</h2>
    <div class="row g-3">
        <!-- ì˜ˆì‚° -->
        <div class="col-md-6 col-lg-3">
            <div class="card border-info">
                <div class="card-body">
                    <h5 class="card-title">ì˜ˆì‚°</h5>
                    <p class="card-text">
                        {{ budget|intcomma }} ì›
                    </p>
                </div>
            </div>
        </div>
        <!-- ì¶œë°œì¼ (ë²”ìœ„) -->
        <div class="col-md-6 col-lg-3">
            <div class="card border-primary">
                <div class="card-body">
                    <h5 class="card-title">ì¶œë°œì¼(ë²”ìœ„)</h5>
                    <p class="card-text">
                        {% if departure_start and departure_end %}
                        {{ departure_start }} ~ {{ departure_end }}
                        {% else %}
                        -
                        {% endif %}
                    </p>
                </div>
            </div>
        </div>
        <!-- ë„ì°©ì¼ (ë²”ìœ„) -->
        <div class="col-md-6 col-lg-3">
            <div class="card border-warning">
                <div class="card-body">
                    <h5 class="card-title">ë„ì°©ì¼(ë²”ìœ„)</h5>
                    <p class="card-text">
                        {% if arrival_start and arrival_end %}
                        {{ arrival_start }} ~ {{ arrival_end }}
                        {% else %}
                        -
                        {% endif %}
                    </p>
                </div>
            </div>
        </div>
        <!-- ì—¬í–‰ì§€(ë„ì‹œë“¤) -->
        <div class="col-md-6 col-lg-3">
            <div class="card border-success">
                <div class="card-body">
                    <h5 class="card-title">ì—¬í–‰ì§€</h5>
                    <p class="card-text">
                        {% if cities %}
                        {{ cities|join:", " }}
                        {% else %}
                        ë¯¸ì •
                        {% endif %}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ë¹„í–‰ê¸°+í˜¸í…” ì¡°í•© ë¦¬ìŠ¤íŠ¸ -->
<div class="container mb-5">
    <h2 class="mb-3">ì¶”ì²œ ì¡°í•©</h2>

    {% if packages and packages|length > 0 %}
    <div class="row row-cols-1 row-cols-md-2 g-4">
        {% for item in packages %}
        <div class="col">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-primary text-white">
                    ì´ ë¹„ìš©: {{ item.total_price|floatformat:0|intcomma }} ì›
                </div>
                <div class="card-body">
                    <!-- ë¹„í–‰ê¸° ì •ë³´ -->
                    <h5 class="card-title text-primary mb-2">
                        âœˆ í•­ê³µ : {{ item.departure.airline }} {{ item.return.airline }} ({{ item.departure.departure_display_code }} â†’ {{ item.departure.arrival_display_code }})
                    </h5>
                    <ul class="list-group list-group-flush mb-3">
                        <li class="list-group-item">
                            <strong>ì¶œë°œì¼:</strong> {{ item.departure.departure_date }}
                        </li>
                        <li class="list-group-item">
                            <strong>ë³µê·€ì¼:</strong> {{ item.return.departure_date }}
                        </li>
                        <li class="list-group-item">
                            <strong>í•­ê³µê¶Œ ê°€ê²©:</strong> {{ item.departure.amount|floatformat:0|intcomma }} + {{ item.return.price|floatformat:0|intcomma }} ì›
                        </li>
                    </ul>

                    <!-- í˜¸í…” ì •ë³´ -->
                    <h5 class="card-title text-success mb-2">
                        ğŸ¨ í˜¸í…” : {{ item.hotel.hotel_name }} ({{ item.hotel.city }})
                    </h5>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <strong>ì²´í¬ì¸:</strong> {{ item.hotel.check_in }}
                        </li>
                        <li class="list-group-item">
                            <strong>ì²´í¬ì•„ì›ƒ:</strong> {{ item.hotel.check_out }}
                        </li>
                        <li class="list-group-item">
                            <strong>ìˆ™ë°• ê°€ê²©:</strong> {{ item.hotel_price|floatformat:0|intcomma }} ì›
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-muted">í˜„ì¬ ì¡°ê±´ì— ë§ëŠ” ì¡°í•©ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}
</div>
{% endblock %}
